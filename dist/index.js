!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("bn.js"),require("@solana/web3.js"),require("camelcase"),require("snake-case"),require("js-sha256"),require("@project-serum/borsh"),require("pako"),require("eventemitter3"),require("bs58"),require("base64-js"),require("assert"),require("crypto-hash")):"function"==typeof define&&define.amd?define(["exports","bn.js","@solana/web3.js","camelcase","snake-case","js-sha256","@project-serum/borsh","pako","eventemitter3","bs58","base64-js","assert","crypto-hash"],t):t((e||self).anchor={},e.bn_js,e.web3_js,e.camelcase,e.snakeCase,e.jsSha256,e.borsh,e.pako,e.eventemitter3,e.bs58,e.base64Js,e.assert,e.cryptoHash)}(this,function(e,t,n,r,o,i,u,c,a,s,l,f,d){function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}var v=h(t),m=p(n),y=h(r),g=p(i),b=p(u),w=h(a),P=p(s),k=p(l),S=p(f),j=h(f);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),e}function E(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,B(e,t)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e,t,n){return(O=I()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&B(o,n.prototype),o}).apply(null,arguments)}function x(e){var t="function"==typeof Map?new Map:void 0;return(x=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return O(e,arguments,L(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),B(n,e)})(e)}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t,n){if(!e.s){if(n instanceof q){if(!n.s)return void(n.o=T.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(T.bind(null,e,t),T.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var R=function(){function e(e,t,n){this.connection=e,this.wallet=t,this.opts=n}e.defaultOptions=function(){return{preflightCommitment:"recent",commitment:"recent"}},e.local=function(t,r){return r=r||e.defaultOptions(),new e(new n.Connection(t||"http://localhost:8899",r.preflightCommitment),M.local(),r)},e.env=function(){var t=require("process").env.ANCHOR_PROVIDER_URL;if(void 0===t)throw new Error("ANCHOR_PROVIDER_URL is not defined");var r=e.defaultOptions();return new e(new n.Connection(t,r.commitment),M.local(),r)};var t=e.prototype;return t.send=function(e,t,r){try{var o=this;void 0===t&&(t=[]),void 0===r&&(r=o.opts);var i=t.filter(function(e){return void 0!==e}),u=[o.wallet.publicKey].concat(i.map(function(e){return e.publicKey}));return e.setSigners.apply(e,u),Promise.resolve(o.connection.getRecentBlockhash(r.preflightCommitment)).then(function(t){return e.recentBlockhash=t.blockhash,Promise.resolve(o.wallet.signTransaction(e)).then(function(){i.forEach(function(t){e.partialSign(t)});var t=e.serialize();return Promise.resolve(n.sendAndConfirmRawTransaction(o.connection,t,r))})})}catch(e){return Promise.reject(e)}},t.sendAll=function(e,t){try{var r=this;return void 0===t&&(t=r.opts),Promise.resolve(r.connection.getRecentBlockhash(t.preflightCommitment)).then(function(o){var i=e.map(function(e){var t=e.tx,n=e.signers;void 0===n&&(n=[]);var i=n.filter(function(e){return void 0!==e}),u=[r.wallet.publicKey].concat(i.map(function(e){return e.publicKey}));return t.setSigners.apply(t,u),t.recentBlockhash=o.blockhash,i.forEach(function(e){t.partialSign(e)}),t});return Promise.resolve(r.wallet.signAllTransactions(i)).then(function(e){var o=[],u=0,c=function(e,t,n){for(var r;;){var o=e();if(C(o)&&(o=o.v),!o)return i;if(o.then){r=0;break}var i=n();if(i&&i.then){if(!C(i)){r=1;break}i=i.s}if(t){var u=t();if(u&&u.then&&!C(u)){r=2;break}}}var c=new q,a=T.bind(null,c,2);return(0===r?o.then(l):1===r?i.then(s):u.then(f)).then(void 0,a),c;function s(r){i=r;do{if(t&&(u=t())&&u.then&&!C(u))return void u.then(f).then(void 0,a);if(!(o=e())||C(o)&&!o.v)return void T(c,1,i);if(o.then)return void o.then(l).then(void 0,a);C(i=n())&&(i=i.v)}while(!i||!i.then);i.then(s).then(void 0,a)}function l(e){e?(i=n())&&i.then?i.then(s).then(void 0,a):s(i):T(c,1,i)}function f(){(o=e())?o.then?o.then(l).then(void 0,a):l(o):T(c,1,i)}}(function(){return u<i.length},function(){return!!(u+=1)},function(){var i=e[u].serialize(),c=o.push;return Promise.resolve(n.sendAndConfirmRawTransaction(r.connection,i,t)).then(function(e){c.call(o,e)})});return c&&c.then?c.then(function(){return o}):o})})}catch(e){return Promise.reject(e)}},t.simulate=function(e,t,n){try{var r=this;void 0===t&&(t=[]),void 0===n&&(n=r.opts);var o=t.filter(function(e){return void 0!==e}),i=[r.wallet.publicKey].concat(o.map(function(e){return e.publicKey}));return e.setSigners.apply(e,i),Promise.resolve(r.connection.getRecentBlockhash(n.preflightCommitment)).then(function(t){return e.recentBlockhash=t.blockhash,Promise.resolve(r.wallet.signTransaction(e)).then(function(){return o.forEach(function(t){e.partialSign(t)}),Promise.resolve(function(e,t,n){try{return Promise.resolve(e._recentBlockhash(e._disableBlockhashCaching)).then(function(r){t.recentBlockhash=r;var o=t.serializeMessage(),i=t._serialize(o).toString("base64");return Promise.resolve(e._rpcRequest("simulateTransaction",[i,{encoding:"base64",commitment:n}])).then(function(e){if(e.error)throw new Error("failed to simulate transaction: "+e.error.message);return e.result})})}catch(e){return Promise.reject(e)}}(r.connection,e,n.commitment))})})}catch(e){return Promise.reject(e)}},e}(),q=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,o=this.s;if(o){var i=1&o?t:n;if(i){try{T(r,1,i(this.v))}catch(e){T(r,2,e)}return r}return this}return this.o=function(e){try{var o=e.v;1&e.s?T(r,1,t?t(o):o):n?T(r,1,n(o)):T(r,2,o)}catch(e){T(r,2,e)}},r},e}();function C(e){return e instanceof q&&1&e.s}var M=function(){function e(e){this.payer=e}e.local=function(){return new e(new n.Account(Buffer.from(JSON.parse(require("fs").readFileSync(require("os").homedir()+"/.config/solana/id.json",{encoding:"utf-8"})))))};var t=e.prototype;return t.signTransaction=function(e){try{return e.partialSign(this.payer),Promise.resolve(e)}catch(e){return Promise.reject(e)}},t.signAllTransactions=function(e){try{var t=this;return Promise.resolve(e.map(function(e){return e.partialSign(t.payer),e}))}catch(e){return Promise.reject(e)}},_(e,[{key:"publicKey",get:function(){return this.payer.publicKey}}]),e}(),W=function(e){function t(){return e.apply(this,arguments)||this}return E(t,e),t}(x(Error)),D=function(e){function t(t,n){var r;return(r=e.call.apply(e,[this].concat([].slice.call(arguments,2)))||this).code=t,r.msg=n,r}return E(t,e),t.prototype.toString=function(){return this.msg},t}(x(Error)),N=function(e){try{return Promise.resolve(Buffer.from(g.digest("account:"+e)).slice(0,8))}catch(e){return Promise.reject(e)}},U=function(e){try{return Promise.resolve(Buffer.from(g.digest("account:"+e)).slice(0,8))}catch(e){return Promise.reject(e)}},J=function(){function e(e){this.instruction=new F(e),this.accounts=new z(e),this.types=new V(e),this.events=new $(e),e.state&&(this.state=new H(e))}return e.prototype.sighash=function(e,t){return X(e,t)},e}(),F=function(){function e(t){this.ixLayout=e.parseIxLayout(t)}var t=e.prototype;return t.encode=function(e,t){return this._encode("global",e,t)},t.encodeState=function(e,t){return this._encode("state",e,t)},t._encode=function(e,t,n){var r=Buffer.alloc(1e3),o=y.default(t),i=this.ixLayout.get(o).encode(n,r),u=r.slice(0,i);return Buffer.concat([X(e,t),u])},e.parseIxLayout=function(e){var t=(e.state?e.state.methods:[]).map(function(t){var n=t.args.map(function(t){return Q.fieldLayout(t,e.types)}),r=y.default(t.name);return[r,b.struct(n,r)]}).concat(e.instructions.map(function(t){var n=t.args.map(function(t){return Q.fieldLayout(t,e.types)}),r=y.default(t.name);return[r,b.struct(n,r)]}));return new Map(t)},e}(),z=function(){function e(e){if(void 0!==e.accounts){var t=e.accounts.map(function(t){return[t.name,Q.typeDefLayout(t,e.types)]});this.accountLayouts=new Map(t)}else this.accountLayouts=new Map}var t=e.prototype;return t.encode=function(e,t){try{var n=Buffer.alloc(1e3),r=this.accountLayouts.get(e).encode(t,n),o=n.slice(0,r);return Promise.resolve(U(e)).then(function(e){return Buffer.concat([e,o])})}catch(e){return Promise.reject(e)}},t.decode=function(e,t){var n=t.slice(8);return this.accountLayouts.get(e).decode(n)},e}(),V=function(){function e(e){if(void 0!==e.types){var t=e.types.map(function(t){return[t.name,Q.typeDefLayout(t,e.types)]});this.layouts=new Map(t)}else this.layouts=new Map}var t=e.prototype;return t.encode=function(e,t){var n=Buffer.alloc(1e3),r=this.layouts.get(e).encode(t,n);return n.slice(0,r)},t.decode=function(e,t){return this.layouts.get(e).decode(t)},e}(),$=function(){function e(e){if(void 0!==e.events){var t=e.events.map(function(t){var n={name:t.name,type:{kind:"struct",fields:t.fields.map(function(e){return{name:e.name,type:e.type}})}};return[t.name,Q.typeDefLayout(n,e.types)]});this.layouts=new Map(t)}else this.layouts=new Map}var t=e.prototype;return t.encode=function(e,t){var n=Buffer.alloc(1e3),r=this.layouts.get(e).encode(t,n);return n.slice(0,r)},t.decode=function(e,t){return this.layouts.get(e).decode(t)},e}(),H=function(){function e(e){if(void 0===e.state)throw new Error("Idl state not defined.");this.layout=Q.typeDefLayout(e.state.struct,e.types)}var t=e.prototype;return t.encode=function(e,t){try{var n=Buffer.alloc(1e3),r=this.layout.encode(t,n);return Promise.resolve(N(e)).then(function(e){var t=n.slice(0,r);return Buffer.concat([e,t])})}catch(e){return Promise.reject(e)}},t.decode=function(e){var t=e.slice(8);return this.layout.decode(t)},e}(),Q=function(){function e(){}return e.fieldLayout=function(t,n){var r=void 0!==t.name?y.default(t.name):void 0;switch(t.type){case"bool":return b.bool(r);case"u8":return b.u8(r);case"u16":return b.u16(r);case"u32":return b.u32(r);case"u64":return b.u64(r);case"i64":return b.i64(r);case"u128":return b.u128(r);case"i128":return b.i128(r);case"bytes":return b.vecU8(r);case"string":return b.str(r);case"publicKey":return b.publicKey(r);default:if(t.type.vec)return b.vec(e.fieldLayout({name:void 0,type:t.type.vec},n),r);if(t.type.option)return b.option(e.fieldLayout({name:void 0,type:t.type.option},n),r);if(t.type.defined){if(void 0===n)throw new W("User defined types not provided");var o=n.filter(function(e){return e.name===t.type.defined});if(1!==o.length)throw new W("Type not found: "+JSON.stringify(t));return e.typeDefLayout(o[0],n,r)}if(t.type.array){var i=t.type.array[1],u=e.fieldLayout({name:void 0,type:t.type.array[0]},n);return b.array(u,i,r)}throw new Error("Not yet implemented: "+t)}},e.typeDefLayout=function(t,n,r){if("struct"===t.type.kind){var o=t.type.fields.map(function(t){return e.fieldLayout(t,n)});return b.struct(o,r)}if("enum"===t.type.kind){var i=t.type.variants.map(function(t){var r=y.default(t.name);if(void 0===t.fields)return b.struct([],r);var o=t.fields.map(function(t){if(void 0===t.name)throw new Error("Tuple enum variants not yet implemented.");return e.fieldLayout(t,n)});return b.struct(o,r)});return void 0!==r?b.rustEnum(i).replicate(r):b.rustEnum(i,r)}throw new Error("Unknown type kint: "+t)},e}();function Y(e,t){switch(t){case"bool":case"u8":case"i8":return 1;case"u16":return 2;case"u32":return 4;case"u64":case"i64":return 8;case"u128":case"i128":return 16;case"bytes":case"string":return 1;case"publicKey":return 32;default:if(void 0!==t.vec)return 1;if(void 0!==t.option)return 1+Y(e,t.option);if(void 0!==t.defined){var n=e.types.filter(function(e){return e.name===t.defined});if(1!==n.length)throw new W("Type not found: "+JSON.stringify(t));return G(e,n[0])}if(void 0!==t.array){var r=t.array[1];return Y(e,t.array[0])*r}throw new Error("Invalid type "+JSON.stringify(t))}}function G(e,t){if("enum"===t.type.kind){var n=t.type.variants.map(function(t){return void 0===t.fields?0:t.fields.map(function(t){if(void 0===t.name)throw new Error("Tuple enum variants not yet implemented.");return Y(e,t.type)}).reduce(function(e,t){return e+t})});return Math.max.apply(Math,n)+1}return void 0===t.type.fields?0:t.type.fields.map(function(t){return Y(e,t.type)}).reduce(function(e,t){return e+t})}function X(e,t){var n=o.snakeCase(t);return Buffer.from(g.digest(e+"::"+n)).slice(0,8)}var Z=function(e){try{return Promise.resolve(n.PublicKey.findProgramAddress([],e)).then(function(t){return Promise.resolve(n.PublicKey.createWithSeed(t[0],"anchor:idl",e))})}catch(e){return Promise.reject(e)}},ee=b.struct([b.publicKey("authority"),b.vecU8("data")]);function te(e){var t=[].slice.call(arguments,1);if(e.args.length!=t.length)throw new Error("Invalid argument length");var n={},r=0;return e.args.forEach(function(e){n[e.name]=t[r],r+=1}),n}function ne(e,t){e.forEach(function(e){if(void 0!==e.accounts)ne(e.accounts,t[e.name]);else if(void 0===t[e.name])throw new Error("Invalid arguments: "+e.name+" not provided.")})}function re(e,t){var n=t.toString().split("custom program error: ");if(2===n.length)try{var r=parseInt(n[1]),o=e.get(r);return void 0===o?null:new D(r,o)}catch(e){return null}}function oe(e,t){var n={},r=e.args?e.args.length:0;if(t.length>r){if(t.length!==r+1)throw new Error("provided too many arguments ${args}");n=t.pop()}return[t,n]}var ie=function(){function e(){}return e.build=function(t,r,o){if("_inner"===t.name)throw new W("the _inner name is reserved");var i=function(){var i=[].slice.call(arguments),u=oe(t,[].concat(i)),c=u[0],a=u[1];ne(t.accounts,a.accounts),ue.apply(void 0,[t].concat(i));var s=e.accountsArray(a.accounts,t.accounts);return void 0!==a.remainingAccounts&&s.push.apply(s,a.remainingAccounts),a.__private&&a.__private.logAccounts&&console.log("Outgoing account metas:",s),new n.TransactionInstruction({keys:s,programId:o,data:r.instruction.encode(t.name,te.apply(void 0,[t].concat(c)))})};return i.accounts=function(n){return e.accountsArray(n,t.accounts)},i},e.accountsArray=function(t,n){return n.map(function(n){var r=n.accounts;return void 0!==r?e.accountsArray(t[n.name],r).flat():{pubkey:t[n.name],isWritable:n.isMut,isSigner:n.isSigner}}).flat()},e}();function ue(e){}function ce(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var ae=function(e){try{return Promise.resolve(n.PublicKey.findProgramAddress([],e)).then(function(t){return n.PublicKey.createWithSeed(t[0],"unversioned",e)})}catch(e){return Promise.reject(e)}},se=function(){function e(){}return e.build=function(e,t,r,o,i){if(void 0!==e.state){var u=function(){try{return Promise.resolve(ae(r)).then(function(n){return Promise.resolve(i.connection.getAccountInfo(n)).then(function(r){if(null===r)throw new Error("Account does not exist "+n.toString());return Promise.resolve(N(e.state.struct.name)).then(function(e){if(e.compare(r.data.slice(0,8)))throw new Error("Invalid account discriminator");return t.state.decode(r.data)})})})}catch(e){return Promise.reject(e)}},c={},a={};e.state.methods.forEach(function(e){var u=function(t){try{return Promise.resolve(function(e,t,r,o){try{return"new"===r.name?Promise.resolve(n.PublicKey.findProgramAddress([],e)).then(function(r){var o=r[0],i={pubkey:t.wallet.publicKey,isWritable:!1,isSigner:!0};return Promise.resolve(ae(e)).then(function(t){return[i,{pubkey:t,isWritable:!0,isSigner:!1},{pubkey:o,isWritable:!1,isSigner:!1},{pubkey:n.SystemProgram.programId,isWritable:!1,isSigner:!1},{pubkey:e,isWritable:!1,isSigner:!1},{pubkey:n.SYSVAR_RENT_PUBKEY,isWritable:!1,isSigner:!1}]})}):(ne(r.accounts,o),Promise.resolve(ae(e)).then(function(e){return[{pubkey:e,isWritable:!0,isSigner:!1}]}))}catch(e){return Promise.reject(e)}}(r,i,e,t)).then(function(n){return n.concat(ie.accountsArray(t,e.accounts))})}catch(e){return Promise.reject(e)}},s=function(){try{var o=arguments,i=oe(e,[].concat([].slice.call(o))),c=i[0],a=i[1];return Promise.resolve(u(a.accounts)).then(function(o){return new n.TransactionInstruction({keys:o,programId:r,data:t.instruction.encodeState(e.name,te.apply(void 0,[e].concat(c)))})})}catch(e){return Promise.reject(e)}};s.accounts=u,a[e.name]=s,c[e.name]=function(){try{var t=arguments,r=[].slice.call(t),u=oe(e,[].concat(r)),c=u[1],s=new n.Transaction;void 0!==c.instructions&&s.add.apply(s,c.instructions);var l=s.add;return Promise.resolve(a[e.name].apply(a,r)).then(function(e){return l.call(s,e),ce(function(){return Promise.resolve(i.send(s,c.signers,c.options))},function(e){var t=re(o,e);if(null===t)throw e;throw t})})}catch(e){return Promise.reject(e)}}}),u.rpc=c,u.instruction=a,u.address=function(){return ae(r)};var s=null;return u.subscribe=function(e){if(null!==s)return s.ee;var n=new w.default;return u.address().then(function(r){var o=i.connection.onAccountChange(r,function(e){var r=t.state.decode(e.data);n.emit("change",r)},e);s={ee:n,listener:o}}),n},u.unsubscribe=function(){null!==s&&i.connection.removeAccountChangeListener(s.listener).then(function(){return s=null,Promise.resolve()}).catch(console.error)},u}},e}(),le=function(){function e(){}return e.build=function(e,t){return function(){var r=[].slice.call(arguments),o=oe(e,[].concat(r)),i=o[1],u=new n.Transaction;return void 0!==i.instructions&&u.add.apply(u,i.instructions),u.add(t.apply(void 0,r)),u}},e}();function fe(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var de=function(){function e(){}return e.build=function(e,t,n,r){return function(){try{var o=arguments,i=[].slice.call(o),u=t.apply(void 0,i),c=oe(e,[].concat(i)),a=c[1];return Promise.resolve(fe(function(){return Promise.resolve(r.send(u,a.signers,a.options))},function(e){console.log("Translating error",e);var t=re(n,e);if(null===t)throw e;throw t}))}catch(e){return Promise.reject(e)}}},e}(),he=new Map,pe=function(){function e(){}return e.build=function(e,t,r,o){var i={};return e.accounts.forEach(function(u){var c=y.default(u.name),a=function(e){try{return Promise.resolve(o.connection.getAccountInfo(e)).then(function(n){if(null===n)throw new Error("Account does not exist "+e.toString());return Promise.resolve(U(u.name)).then(function(e){if(e.compare(n.data.slice(0,8)))throw new Error("Invalid account discriminator");return t.accounts.decode(u.name,n.data)})})}catch(e){return Promise.reject(e)}};a.size=8+G(e,u),a.createInstruction=function(e,t){try{var i=a.size,u=n.SystemProgram.createAccount,c=e.publicKey,s=o.wallet.publicKey;return Promise.resolve(o.connection.getMinimumBalanceForRentExemption(null!=t?t:i)).then(function(e){return u.call(n.SystemProgram,{fromPubkey:s,newAccountPubkey:c,space:null!=t?t:i,lamports:e,programId:r})})}catch(e){return Promise.reject(e)}},a.subscribe=function(e,n){if(he.get(e.toString()))return he.get(e.toString()).ee;var r=new w.default,i=o.connection.onAccountChange(e,function(e){var n=t.accounts.decode(u.name,e.data);r.emit("change",n)},n);return he.set(e.toString(),{ee:r,listener:i}),r},a.unsubscribe=function(e){var t=he.get(e.toString());t?he&&o.connection.removeAccountChangeListener(t.listener).then(function(){he.delete(e.toString())}).catch(console.error):console.warn("Address is not subscribed")},a.all=function(e){try{return Promise.resolve(U(u.name)).then(function(i){return void 0!==e&&(i=Buffer.concat([i,e])),Promise.resolve(o.connection._rpcRequest("getProgramAccounts",[r.toBase58(),{commitment:o.connection.commitment,filters:[{memcmp:{offset:0,bytes:P.encode(i)}}]}])).then(function(e){if(e.error)throw console.error(e),new Error("Failed to get accounts");return e.result.map(function(e){var r=e.pubkey,o=e.account.data;return o=P.decode(o),{publicKey:new n.PublicKey(r),account:t.accounts.decode(u.name,o)}})})})}catch(e){return Promise.reject(e)}},a.associatedAddress=function(){try{var e=arguments,t=[Buffer.from([97,110,99,104,111,114])];return[].slice.call(e).forEach(function(e){t.push(e.toBuffer())}),Promise.resolve(n.PublicKey.findProgramAddress(t,r)).then(function(e){return e[0]})}catch(e){return Promise.reject(e)}},a.associated=function(){try{var e=arguments;return Promise.resolve(a.associatedAddress.apply(a,[].slice.call(e))).then(function(e){return Promise.resolve(a(e))})}catch(e){return Promise.reject(e)}},i[c]=a}),i},e}(),ve="Program log: ".length,me=function(){function e(e,t,n){this.coder=e,this.programId=t,this.discriminators=new Map(void 0===n.events?[]:n.events.map(function(e){return[k.fromByteArray((t=e.name,Buffer.from(g.digest("event:"+t)).slice(0,8))),e.name];var t}))}var t=e.prototype;return t.parseLogs=function(e,t){for(var n=new ge(e),r=new ye(n.next()),o=n.next();null!==o;){var i=this.handleLog(r,o),u=i[0],c=i[1],a=i[2];u&&t(u),c&&r.push(c),a&&(r.pop(),n.next()),o=n.next()}},t.handleLog=function(e,t){return e.program()===this.programId.toString()?this.handleProgramLog(t):[null].concat(this.handleSystemLog(t))},t.handleProgramLog=function(e){if(e.startsWith("Program log:")){var t=e.slice(ve),n=Buffer.from(k.toByteArray(t)),r=k.fromByteArray(n.slice(0,8)),o=null,i=this.discriminators.get(r);return void 0!==i&&(o={name:i,data:this.coder.events.decode(i,n.slice(8))}),[o,null,!1]}return[null].concat(this.handleSystemLog(e))},t.handleSystemLog=function(e){var t=e.split(":")[0];return t.startsWith("Program "+this.programId.toString()+" invoke")?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:null!==t.match(/^Program (.*) consumed .*$/g)?[null,!0]:[null,!1]},e}(),ye=function(){function e(e){var t=/^Program (.*) invoke.*$/g.exec(e)[1];this.stack=[t]}var t=e.prototype;return t.program=function(){return S.ok(this.stack.length>0),this.stack[this.stack.length-1]},t.push=function(e){this.stack.push(e)},t.pop=function(){S.ok(this.stack.length>0),this.stack.pop()},e}(),ge=function(){function e(e){this.logs=e}return e.prototype.next=function(){if(0===this.logs.length)return null;var e=this.logs[0];return this.logs=this.logs.slice(1),e},e}();function be(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var we=function(){function e(){}return e.build=function(e,t,n,r,o,i,u){return function(){try{var c,a=arguments,s=function(e){if(c)return e;if(void 0===p)throw new Error("Unable to simulate transaction");if(p.value.err)throw new Error("Simulate error: "+p.value.err.toString());var t=p.value.logs;if(!t)throw new Error("Simulated logs not found");var n=[];return u.events&&new me(o,i,u).parseLogs(t,function(e){n.push(e)}),{events:n,raw:t}},l=[].slice.call(a),f=t.apply(void 0,l),d=oe(e,[].concat(l)),h=d[1],p=void 0,v=be(function(){return Promise.resolve(r.simulate(f,h.signers,h.options)).then(function(e){p=e})},function(e){console.log("Translating error",e);var t=re(n,e);if(null===t)throw e;throw t});return Promise.resolve(v&&v.then?v.then(s):s(v))}catch(e){return Promise.reject(e)}}},e}(),Pe=function(){function e(){}return e.build=function(e,t,n,r){var o=function(e){var t=new Map;return e.errors&&e.errors.forEach(function(e){var n,r=null!=(n=e.msg)?n:e.name;t.set(e.code,r)}),t}(e),i={},u={},c={},a={},s=se.build(e,t,n,o,r);e.instructions.forEach(function(s){var l=ie.build(s,t,n),f=le.build(s,l),d=de.build(s,f,o,r),h=we.build(s,f,o,r,t,n,e),p=y.default(s.name);u[p]=l,c[p]=f,i[p]=d,a[p]=h});var l=e.accounts?pe.build(e,t,n,r):{};return[i,u,c,l,s,a]},e}();new n.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");var ke={bs58:P,sha256:d.sha256,getMultipleAccounts:function(e,t){try{var r=[t.map(function(e){return e.toBase58()}),{commitment:"recent"}];return Promise.resolve(e._rpcRequest("getMultipleAccounts",r)).then(function(e){if(e.error)throw new Error("failed to get info about accounts "+t.map(function(e){return e.toBase58()}).join(", ")+": "+e.error.message);j.default(void 0!==e.result);for(var r,o=[],i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.result.value);!(r=i()).done;){var u=r.value,c=null;if(null===u)return void o.push(null);if(e.result.value){var a=u.executable,s=u.owner,l=u.lamports,f=u.data;j.default("base64"===f[1]),c={executable:a,owner:new n.PublicKey(s),lamports:l,data:Buffer.from(f[0],"base64")}}if(null===c)throw new Error("Invalid response");o.push(c)}return o.map(function(e,n){return null===e?null:{publicKey:t[n],account:e}})})}catch(e){return Promise.reject(e)}},idlAddress:Z},Se=function(){function e(e,t,n){this._idl=e,this._programId=t,this._provider=null!=n?n:Ee(),this._coder=new J(e);var r=Pe.build(e,this._coder,t,this._provider),o=r[1],i=r[2],u=r[3],c=r[4],a=r[5];this.rpc=r[0],this.instruction=o,this.transaction=i,this.account=u,this.state=c,this.simulate=a}e.at=function(t,n){try{return Promise.resolve(e.fetchIdl(t,n)).then(function(r){return new e(r,t,n)})}catch(e){return Promise.reject(e)}},e.fetchIdl=function(e,t){try{var n;return t=null!=(n=t)?n:Ee(),Promise.resolve(Z(e)).then(function(e){return Promise.resolve(t.connection.getAccountInfo(e)).then(function(e){var t,n,r=(t=e.data.slice(8),ee.decode(t)),o=c.inflate(r.data);return JSON.parse((n=o,("undefined"==typeof TextDecoder?new(require("util").TextDecoder)("utf-8"):new TextDecoder("utf-8")).decode(n)))})})}catch(e){return Promise.reject(e)}};var t=e.prototype;return t.addEventListener=function(e,t){var n=new me(this._coder,this._programId,this._idl);return this._provider.connection.onLogs(this._programId,function(r,o){r.err?console.error(r):n.parseLogs(r.logs,function(n){n.name===e&&t(n.data,o.slot)})})},t.removeEventListener=function(e){try{return Promise.resolve(this._provider.connection.removeOnLogsListener(e))}catch(e){return Promise.reject(e)}},_(e,[{key:"programId",get:function(){return this._programId}},{key:"idl",get:function(){return this._idl}},{key:"coder",get:function(){return this._coder}},{key:"provider",get:function(){return this._provider}}]),e}(),je=!1,Ae=new Proxy({},{get:function(e,t){var r=require("find"),o=require("fs"),i=require("process");if("undefined"==typeof window){if(!je){for(var u=require("path"),c=i.cwd();!o.existsSync(u.join(c,"Anchor.toml"));){var a=u.dirname(c);a===c&&(c=void 0),c=a}if(void 0===c)throw new Error("Could not find workspace root.");r.fileSync(/target\/idl\/.*\.json/,c).reduce(function(e,t){var r=o.readFileSync(t),i=JSON.parse(r);return e[y.default(i.name,{pascalCase:!0})]=new Se(i,new n.PublicKey(i.metadata.address)),e},e),je=!0}return e[t]}}}),_e=null;function Ee(){return null===_e?R.local():_e}Object.defineProperty(e,"BN",{enumerable:!0,get:function(){return v.default}}),e.web3=m,e.Coder=J,e.Program=Se,e.Provider=R,e.Wallet=M,e.getProvider=Ee,e.setProvider=function(e){_e=e},e.utils=ke,e.workspace=Ae});
//# sourceMappingURL=index.js.map
